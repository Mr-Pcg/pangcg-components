---
nav: 组件 #设置具体的导航栏
group: #设置具体的菜单栏
  title: 文件预览 # 所在分组的名称
  order: 3 # 分组排序，值越小越靠前
title: PdfAnnotationExtension #设置文件名称

toc: content #在页面右侧展示锚点链接
mobile: false
---

# PdfAnnotationScroll PDF 滚动批注组件

PDF 批注组件用于在线预览 PDF 文件并添加多种类型的批注，支持高亮、删除线、下划线、矩形框、圆形、椭圆、自由绘制、自由高亮、签名和盖章等功能。

## 功能特点

- 📄 **多页预览**：支持 PDF 多页面浏览和页面导航
- 🔍 **缩放控制**：支持 PDF 放大和缩小
- ✏️ **多种批注工具**：
  - 文本批注：高亮、删除线、下划线 ---- （暂未实现）
  - 形状批注：矩形框、圆形、椭圆
  - 绘制批注：自由绘制、自由高亮
  - 图像批注：签名、盖章
- 📋 **批注管理**：查看、编辑、删除批注，添加批注评论
- 💾 **批注保存**：导出批注数据
- 🔒 **只读模式**：支持只查看不编辑批注
- 🎨 **丰富的样式**：分组的工具栏，自定义签名样式，颜色选择器

## 代码演示

### pdf 文件无批注案例

<code src="./demo/basePdfViewer.tsx"></code>

### pdf 文件批注回显

<code src="./demo/myPdfViewer.tsx"></code>

## API 参数

| 属性           | 说明                     | 类型                                                    | 默认值   |
| -------------- | ------------------------ | ------------------------------------------------------- | -------- |
| fileUrl        | PDF 文件路径或二进制数据 | `string \| File \| Blob`                                | -        |
| fileName       | 文件名称                 | `string`                                                | `'文档'` |
| onSave         | 保存批注时的回调函数     | `(annotations: Annotation[], updatedPdf: Blob) => void` | -        |
| readOnly       | 是否为只读模式           | `boolean`                                               | `false`  |
| style          | 组件容器样式             | `React.CSSProperties`                                   | `{}`     |
| className      | 组件容器类名             | `string`                                                | `''`     |
| annotationList | 初始批注数据列表         | `Annotation[]`                                          | `[]`     |

## 批注类型

组件支持以下批注类型：

### 文本批注 （存在问题： 暂未实现）

- **高亮**：高亮显示选中的文本
- **删除线**：在选中的文本上显示删除线
- **下划线**：在选中的文本下显示下划线

### 形状批注

- **矩形框**：绘制矩形边框
- **圆形**：绘制圆形边框
- **椭圆**：绘制椭圆边框

### 自由绘制

- **自由绘制**：自由手绘线条
- **自由高亮**：自由手绘高亮效果

### 图像批注

- **签名**：添加手写签名或上传签名图片
- **盖章**：添加印章或上传印章图片

## 批注评论

为每个批注添加评论说明：

1. 在批注列表中，点击评论图标打开评论面板
2. 输入评论内容后保存
3. 评论将显示在批注列表中相应批注的下方
4. 可以随时编辑或删除评论

## 签名和盖章

签名和盖章功能支持：

1. 手绘签名/盖章：提供多种线条粗细和颜色选择
2. 上传图片：支持上传 PNG、JPG 等格式的签名/盖章图片
3. 预设模板：提供常用盖章模板（仅盖章功能）

## 注意事项

1. 组件需要一个固定高度的容器才能正常显示
2. 文本批注需要 PDF 文件有文本层才能生效
3. 在移动设备上使用时，建议设置适当的缩放比例
4. 目前批注数据仅保存在内存中，需要通过 onSave 回调保存到持久存储

## FAQ

### 为什么无法选择文本进行高亮？

确保 PDF 文件包含文本层而不是纯图像。可以使用 OCR 工具处理扫描 PDF。

### 如何在服务端保存批注数据？

通过 onSave 回调获取批注数据，然后发送到服务器保存。数据格式为 数组。

### 支持哪些 PDF 格式？

组件基于 PDF.js 实现，支持大多数标准 PDF 格式。

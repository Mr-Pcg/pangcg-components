"use strict";(self.webpackChunkpangcg_components=self.webpackChunkpangcg_components||[]).push([[643],{53002:function(hr,z,o){o.r(z),o.d(z,{ErrorBoundaryContext:function(){return n}});var Y=o(67294),n=(0,Y.createContext)(null)},51447:function(hr,z,o){o.r(z),o.d(z,{default:function(){return or},useErrorBoundary:function(){return M}});var Y=o(56690),n=o.n(Y),cr=o(89728),w=o.n(cr),k=o(66115),I=o.n(k),q=o(61655),rr=o.n(q),er=o(26389),nr=o.n(er),V=o(67294),J=o(53002),G={didCatch:!1,error:null};function tr(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return y.length!==t.length||y.some(function(W,O){return!Object.is(W,t[O])})}var or=function(y){rr()(W,y);var t=nr()(W);function W(O){var g;return n()(this,W),g=t.call(this,O),g.resetErrorBoundary=g.resetErrorBoundary.bind(I()(g)),g.state=G,g}return w()(W,[{key:"resetErrorBoundary",value:function(){var g=this.state.error;if(g!==null){for(var B,T,j=arguments.length,F=new Array(j),D=0;D<j;D++)F[D]=arguments[D];(B=(T=this.props).onReset)===null||B===void 0||B.call(T,{args:F,reason:"imperative-api"}),this.setState(G)}}},{key:"componentDidCatch",value:function(g,B){var T,j;(T=this.props)===null||T===void 0||(j=T.onError)===null||j===void 0||j.call(T,g,B)}},{key:"componentDidUpdate",value:function(g,B){var T=this.state.didCatch,j=this.props.resetKeys;if(T&&B.error!==null&&tr(g.resetKeys,j)){var F,D;(F=(D=this.props).onReset)===null||F===void 0||F.call(D,{next:j,prev:g.resetKeys,reason:"keys"}),this.setState(G)}}},{key:"render",value:function(){var g=this.props,B=g.children,T=g.fallbackRender,j=g.FallbackComponent,F=g.fallback,D=this.state,ar=D.didCatch,Q=D.error,H=B;if(ar){var ir={error:Q,resetErrorBoundary:this.resetErrorBoundary};if(typeof T=="function")H=T(ir);else if(j)H=(0,V.createElement)(j,ir);else if(F!==void 0)H=F;else throw console.error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop"),Q}return(0,V.createElement)(J.ErrorBoundaryContext.Provider,{value:{didCatch:ar,error:Q,resetErrorBoundary:this.resetErrorBoundary}},H)}}],[{key:"getDerivedStateFromError",value:function(g){return{didCatch:!0,error:g}}}]),W}(V.Component);function M(){var y=V.useContext(J.ErrorBoundaryContext);if(y===null)throw new Error("useErrorBoundary must be used within an ErrorBoundary");return y}},59643:function(hr,z,o){o.r(z),o.d(z,{EMAIL_PATTERN:function(){return jr},EMAIL_PATTERN_S:function(){return Cr},EditFormTable:function(){return B},EditFormTreeTable:function(){return H},ErrorBoundary:function(){return mr.default},ID_CARD_PATTERN:function(){return Pr},PHONE_NUMBER_PATTERN:function(){return xr},PdfPreview:function(){return Vr},URL_PATTERN:function(){return Jr},generateUUID:function(){return K},isEmail:function(){return Kr},isEmails:function(){return wr},isEmpty:function(){return Gr},isIDCard:function(){return Hr},isNumeric:function(){return Xr},isPhoneNumber:function(){return Yr},isURL:function(){return Qr},useEditFormTreeTable:function(){return ir},useErrorBoundary:function(){return mr.useErrorBoundary}});var Y=o(42122),n=o.n(Y),cr=o(70215),w=o.n(cr),k=o(27973),I=o(40741),q=o(55102),rr=o(34041),er=o(13457),nr=o(84567),V=o(55742),J=o(41637),G=o(68351),tr=o(68968),or=o(98644),M=o(83622),y=o(67294),t=o(85893),W=["formListProps","recordCreatorProps","columns","dataSource"],O=k.default.RangePicker,g=function(v){var r=v.formListProps,m=v.recordCreatorProps,a=m===void 0?{creatorButtonShow:!1}:m,S=v.columns,Z=v.dataSource,U=w()(v,W),f=I.Z.useFormInstance();(0,y.useEffect)(function(){r.name&&f.setFieldValue(r.name,Z||[])},[Z,r]);var p=function(P,s){switch(P){case"input":return(0,t.jsx)(q.Z,n()({},s));case"select":return(0,t.jsx)(rr.default,n()({},s));case"datePicker":return(0,t.jsx)(k.default,n()({},s));case"rangePicker":return(0,t.jsx)(O,n()({},s));case"inputNumber":return(0,t.jsx)(er.Z,n()({},s));case"checkbox":return(0,t.jsx)(nr.Z,n()({},s));case"radio":return(0,t.jsx)(V.ZP,n()({},s));case"switch":return(0,t.jsx)(J.Z,n()({},s));case"timePicker":return(0,t.jsx)(G.Z,n()({},s));case"treeSelect":return(0,t.jsx)(tr.Z,n()({},s));default:return null}},C=function(){var P=f.getFieldValue(r.name)||[];return S.map(function(s){var l=s.dataIndex,i=s.componentType,e=i===void 0?"text":i,u=s.componentProps,c=s.formItemProps;return n()(n()({},s),{},{render:function(lr,vr,b){var x=(P==null?void 0:P[b])||{};if((s==null?void 0:s.customRender)instanceof Function)return s.customRender({text:(x==null?void 0:x[l])||void 0,record:x,index:b},f);if((s==null?void 0:s.render)instanceof Function)return s.render((x==null?void 0:x[l])||"",x,b);if(e==="text"){var h;return(x==null||(h=x[l])===null||h===void 0?void 0:h.toString())||""}var $=(c==null?void 0:c.valuePropName)||function(){switch(e){case"switch":case"checkbox":return"checked";default:return"value"}}();return(0,t.jsx)(I.Z.Item,n()(n()({},c),{},{valuePropName:$,name:[b,l],style:{marginBottom:0},children:p(e,u)}))}})})};return(0,t.jsx)(I.Z.List,n()(n()({},r||{}),{},{children:function(P,s){var l=s.add;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(or.Z,n()(n()({},U||{}),{},{columns:C(),dataSource:P,pagination:!1})),a!=null&&a.creatorButtonShow?(0,t.jsx)("div",{style:{marginTop:24},children:(0,t.jsx)(M.ZP,n()(n()({},(a==null?void 0:a.buttonProps)||{type:"dashed",block:!0}),{},{onClick:function(){var e=a!=null&&a.record?a==null?void 0:a.record():{};l(n()({},e))},children:(a==null?void 0:a.creatorButtonText)||"\u65B0\u589E\u4E00\u884C"}))}):null]})}}))},B=g,T=o(861),j=o.n(T),F=o(96486),D=["formListProps","recordCreatorProps","columns","dataSource"],ar=k.default.RangePicker,Q=function(v){var r=v.formListProps,m=v.recordCreatorProps,a=m===void 0?{creatorButtonShow:!1}:m,S=v.columns,Z=v.dataSource,U=w()(v,D),f=I.Z.useFormInstance();(0,y.useEffect)(function(){if(r.name&&Z){var s=function i(e){e.forEach(function(u){var c;u._key=(u==null?void 0:u.id)||K(),Array.isArray(u==null?void 0:u.children)&&u!==null&&u!==void 0&&(c=u.children)!==null&&c!==void 0&&c.length?i(u.children):u.children=null})},l=Array.isArray(Z)?(0,F.cloneDeep)(Z):[];s(l),f==null||f.setFieldValue(r.name,l||[])}},[Z,r]);var p=function(l,i){switch(l){case"input":return(0,t.jsx)(q.Z,n()({},i));case"select":return(0,t.jsx)(rr.default,n()({},i));case"datePicker":return(0,t.jsx)(k.default,n()({},i));case"rangePicker":return(0,t.jsx)(ar,n()({},i));case"inputNumber":return(0,t.jsx)(er.Z,n()({},i));case"checkbox":return(0,t.jsx)(nr.Z,n()({},i));case"radio":return(0,t.jsx)(V.ZP,n()({},i));case"switch":return(0,t.jsx)(J.Z,n()({},i));case"timePicker":return(0,t.jsx)(G.Z,n()({},i));case"treeSelect":return(0,t.jsx)(tr.Z,n()({},i));default:return null}},C=function(){return S.map(function(l){var i=l.dataIndex,e=l.componentType,u=e===void 0?"text":e,c=l.componentProps,N=l.formItemProps;return n()(n()({},l),{},{render:function(vr,b,x){var h=(0,F.cloneDeep)(n()({},b));if((l==null?void 0:l.customRender)instanceof Function)return l.customRender({text:(h==null?void 0:h[i])||void 0,record:h,index:x},f);if((l==null?void 0:l.render)instanceof Function)return l.render((h==null?void 0:h[i])||"",h,x);if(u==="text"){var $;return(h==null||($=h[i])===null||$===void 0?void 0:$.toString())||""}var ur=(N==null?void 0:N.valuePropName)||function(){switch(u){case"switch":case"checkbox":return"checked";default:return"value"}}();return(0,t.jsx)(I.Z.Item,n()(n()({},N),{},{valuePropName:ur,name:[].concat(j()(b.fieldKey),[i]),style:{marginBottom:0},children:p(u,c)}))}})})},A=function(l){var i,e=a!=null&&a.record?a==null?void 0:a.record():{},u=a!=null&&a.record?n()(n()({},e),{},{children:Array.isArray(e==null?void 0:e.children)&&e!==null&&e!==void 0&&(i=e.children)!==null&&i!==void 0&&i.length?e.children:null,_key:(e==null?void 0:e.id)||K()}):{_key:K(),children:null};l(n()({},u))},P=(0,y.useCallback)(function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return s==null?void 0:s.map(function(i,e){var u=[].concat(j()(l),[e]),c=f.getFieldValue([r.name].concat(j()(u)));return n()(n()({},c),{},{fieldKey:u,isListField:!0,children:c!=null&&c.children?P(Array(c.children.length).fill({}),[].concat(j()(u),["children"])):void 0})})},[f,r.name]);return(0,t.jsx)(I.Z.List,n()(n()({},r||{}),{},{children:function(l,i){var e=i.add;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(or.Z,n()(n()({},U||{}),{},{dataSource:P(l),columns:C(),rowKey:function(c){return c._key},pagination:!1})),a!=null&&a.creatorButtonShow?(0,t.jsx)("div",{style:{marginTop:24},children:(0,t.jsx)(M.ZP,n()(n()({},(a==null?void 0:a.buttonProps)||{type:"dashed",block:!0}),{},{onClick:function(){return A(e)},children:(a==null?void 0:a.creatorButtonText)||"\u6DFB\u52A0\u4E00\u884C"}))}):null]})}}))},H=Q,ir=function(v){var r=v,m=function(f,p){var C=(r==null?void 0:r.getFieldValue(f))||[];C.push(n()(n()({},p||{}),{},{_key:K()})),r.setFieldValue(f,C)},a=function(f,p,C){var A=(r==null?void 0:r.getFieldValue(f))||[],P=function l(i){return i.map(function(e){var u,c;return(p==null?void 0:p.toString())===(e==null||(u=e._key)===null||u===void 0?void 0:u.toString())?n()(n()({},e),{},{children:[].concat(j()((e==null?void 0:e.children)||[]),[n()(n()({},C||{}),{},{_key:K()})])}):Array.isArray(e==null?void 0:e.children)&&e!==null&&e!==void 0&&(c=e.children)!==null&&c!==void 0&&c.length?n()(n()({},e),{},{children:l(e.children)}):e})},s=P(A);r.setFieldValue(f,s)},S=function(f,p){var C=(r==null?void 0:r.getFieldValue(f))||[],A=function s(l){return l.filter(function(i){var e,u;return((e=i._key)===null||e===void 0?void 0:e.toString())===(p==null?void 0:p.toString())?!1:(Array.isArray(i==null?void 0:i.children)&&i!==null&&i!==void 0&&(u=i.children)!==null&&u!==void 0&&u.length&&(i.children=s(i.children)),!0)})},P=A(C);r.setFieldValue(f,P)},Z=function(f,p,C){var A=(r==null?void 0:r.getFieldValue(f))||[],P=function l(i){return i.map(function(e){var u,c;if((p==null?void 0:p.toString())===(e==null||(u=e._key)===null||u===void 0?void 0:u.toString())){var N;return n()(n()({},e),n()(n()({},C),{},{_key:(e==null||(N=e._key)===null||N===void 0?void 0:N.toString())||K()}))}return Array.isArray(e==null?void 0:e.children)&&e!==null&&e!==void 0&&(c=e.children)!==null&&c!==void 0&&c.length&&(e.children=l(e.children)),e})},s=P(A);r.setFieldValue(f,s)};return{addRootRecord:m,addChildRecord:a,deleteRecord:S,updateRecord:Z}},mr=o(51447),Zr=o(17061),pr=o.n(Zr),Br=o(17156),Nr=o.n(Br),_r=o(27424),X=o.n(_r),Lr=o(37653),Or=o(43929),Ur=o(52514),br=o(89514),Mr=o(69753),sr=o(45360),Er=o(57381),yr=o(28541),Wr=o(16085),zr=o(95327);yr.Tu.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(yr.i8,"/pdf.worker.min.mjs");var Ir=function(v){var r=v.fileUrl,m=v.fileName,a=m===void 0?"\u6587\u4EF6\u9884\u89C8":m,S=v.className,Z=S===void 0?"":S,U=v.style,f=U===void 0?{}:U,p=(0,y.useState)(null),C=X()(p,2),A=C[0],P=C[1],s=(0,y.useState)(1),l=X()(s,2),i=l[0],e=l[1],u=(0,y.useState)(1),c=X()(u,2),N=c[0],lr=c[1],vr=(0,y.useState)(!0),b=X()(vr,2),x=b[0],h=b[1],$=(0,y.useState)(null),ur=X()($,2),Tr=ur[0],dr=ur[1],qr=(0,y.useState)(a),Ar=X()(qr,2),Rr=Ar[0],re=Ar[1],fr=function(E){return typeof File!="undefined"&&E instanceof File},Fr=function(E){return typeof Blob!="undefined"&&E instanceof Blob},ee=function(){var _=Nr()(pr()().mark(function E(){var R,L;return pr()().wrap(function(gr){for(;;)switch(gr.prev=gr.next){case 0:R="",L=!0;try{typeof r=="string"&&(r.startsWith("http://")||r.startsWith("https://"))?(dr(r),R=r.split("/").pop()||a):typeof r=="string"&&r.startsWith("data:")?dr(r):Fr(r)||fr(r)?(dr(r),R=fr(r)&&r!==null&&r!==void 0&&r.name?r.name:a):(sr.ZP.error("\u4E0D\u652F\u6301\u7684\u6587\u4EF6\u683C\u5F0F"),L=!1),L&&re(R),h(!1)}catch(ue){console.error("\u5904\u7406\u6587\u4EF6\u65F6\u51FA\u9519:",ue),sr.ZP.error("\u65E0\u6CD5\u52A0\u8F7D\u6587\u4EF6"),h(!1)}case 3:case"end":return gr.stop()}},E)}));return function(){return _.apply(this,arguments)}}();(0,y.useEffect)(function(){h(!0),dr(null),e(1),ee()},[r,a]);var ne=function(E){var R=E.numPages;P(R),h(!1)},Dr=function(E){e(function(R){var L=R+E;return L>=1&&L<=(A||1)?L:R})},te=function(){return Dr(-1)},oe=function(){return Dr(1)},ae=function(){return lr(function(E){return Math.min(E+.2,3)})},ie=function(){return lr(function(E){return Math.max(E-.2,.5)})},se=function(){try{if(typeof r=="string"&&(r.startsWith("http://")||r.startsWith("https://")))window.open(r,"_blank");else if(typeof r=="string"&&r.startsWith("data:")){var E=document.createElement("a");E.href=r,E.download=Rr||"document.pdf",E.click()}else if(Fr(r)||fr(r)){var R=URL.createObjectURL(r),L=document.createElement("a");L.href=R,L.download=Rr||"document.pdf",L.click(),setTimeout(function(){return URL.revokeObjectURL(R)},100)}}catch(Sr){console.error("\u4E0B\u8F7D\u6587\u4EF6\u65F6\u51FA\u9519:",Sr),sr.ZP.error("\u4E0B\u8F7D\u6587\u4EF6\u5931\u8D25")}},le=function(){return x||!Tr?(0,t.jsx)("div",{className:"document-preview-loading",children:(0,t.jsxs)("div",{className:"loading-container",children:[(0,t.jsx)(Er.Z,{size:"large"}),(0,t.jsx)("div",{className:"loading-text",children:"\u52A0\u8F7D\u4E2D..."})]})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"pdf-container",children:(0,t.jsx)(Wr.Z,{file:Tr,onLoadSuccess:ne,onLoadError:function(R){console.error("Error loading PDF:",R),sr.ZP.error("\u65E0\u6CD5\u52A0\u8F7DPDF\u6587\u4EF6"),h(!1)},loading:(0,t.jsx)(Er.Z,{size:"large"}),children:(0,t.jsx)(zr.Z,{pageNumber:i,scale:N,renderTextLayer:!1,renderAnnotationLayer:!1})})}),(0,t.jsxs)("div",{className:"pdf-controls",children:[(0,t.jsx)(M.ZP,{icon:(0,t.jsx)(Lr.Z,{}),onClick:te,disabled:i<=1}),(0,t.jsx)("span",{children:"".concat(i," / ").concat(A||1)}),(0,t.jsx)(M.ZP,{icon:(0,t.jsx)(Or.Z,{}),onClick:oe,disabled:i>=(A||1)}),(0,t.jsx)(M.ZP,{icon:(0,t.jsx)(Ur.Z,{}),onClick:ie}),(0,t.jsx)(M.ZP,{icon:(0,t.jsx)(br.Z,{}),onClick:ae}),(0,t.jsx)(M.ZP,{icon:(0,t.jsx)(Mr.Z,{}),onClick:se,children:"\u4E0B\u8F7D"})]})]})};return(0,t.jsx)("div",{className:"document-preview-container ".concat(Z),style:f?n()({},f):void 0,children:le()})},Vr=Ir;function K(){var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",v=new Uint8Array(32);return crypto.getRandomValues(v),Array.from(v).map(function(r){return d[r%d.length]}).join("")}var jr=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;function Kr(d){return jr.test(d)}var $r=o(18698),kr=o.n($r);function Gr(d){return d==null?!0:typeof d=="string"?d.trim().length===0:Array.isArray(d)?d.length===0:kr()(d)==="object"?Object.keys(d).length===0:!1}var Pr=/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/;function Hr(d){if(!Pr.test(d))return!1;if(d.length===18){var v=parseInt(d.substr(6,4)),r=parseInt(d.substr(10,2)),m=parseInt(d.substr(12,2)),a=new Date(v,r-1,m);return a.getFullYear()===v&&a.getMonth()+1===r&&a.getDate()===m}return!0}function Xr(d){return!isNaN(parseFloat(d))&&isFinite(Number(d))}var xr=/^1[3-9]\d{9}$/;function Yr(d){return xr.test(d)}var Jr=/^https?:\/\/([a-zA-Z0-9][a-zA-Z0-9-]*\.)*[a-zA-Z0-9][a-zA-Z0-9-]*\.[a-zA-Z]{2,}(:\d{1,5})?(\/[a-zA-Z0-9\-._~:/?#[\]@!$&'()*+,;=]*)?$/;function Qr(d){if(typeof d!="string"||!d.trim())return!1;var v=d.trim(),r;try{r=new URL(v)}catch(Z){return!1}if(!["http:","https:"].includes(r.protocol))return!1;var m=r.hostname;if(/\s/.test(m)||m.startsWith(".")||m.endsWith(".")||/\.\./.test(m))return!1;var a=m.split(".").pop();if(!a||a.length<2)return!1;if(r.port){var S=Number(r.port);if(isNaN(S)||S<=0||S>65535)return!1}return!0}var Cr=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;function wr(d){return Cr.test(d)}}}]);
